# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Kluctl < Formula
  desc "kluctl"
  homepage "https://kluctl.io/"
  version "2.25.0"

  on_macos do
    on_intel do
      url "https://github.com/kluctl/kluctl/releases/download/v2.25.0/kluctl_v2.25.0_darwin_amd64.tar.gz"
      sha256 "2df2f294e1cf7a50287c979e3a7d4ef0a39df57510d5f62cf61cbd5ba6f7b32b"

      def install
        bin.install "kluctl"

        bash_output = Utils.safe_popen_read(bin/"kluctl", "completion", "bash")
        (bash_completion/"kluctl").write bash_output

        zsh_output = Utils.safe_popen_read(bin/"kluctl", "completion", "zsh")
        (zsh_completion/"_kluctl").write zsh_output

        fish_output = Utils.safe_popen_read(bin/"kluctl", "completion", "fish")
        (fish_completion/"kluctl.fish").write fish_output
      end
    end
    on_arm do
      url "https://github.com/kluctl/kluctl/releases/download/v2.25.0/kluctl_v2.25.0_darwin_arm64.tar.gz"
      sha256 "f4aabe8f23fda4b3f14eafd5bf4145d1f6c9b06fbe86032689d06fddb557962e"

      def install
        bin.install "kluctl"

        bash_output = Utils.safe_popen_read(bin/"kluctl", "completion", "bash")
        (bash_completion/"kluctl").write bash_output

        zsh_output = Utils.safe_popen_read(bin/"kluctl", "completion", "zsh")
        (zsh_completion/"_kluctl").write zsh_output

        fish_output = Utils.safe_popen_read(bin/"kluctl", "completion", "fish")
        (fish_completion/"kluctl.fish").write fish_output
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/kluctl/kluctl/releases/download/v2.25.0/kluctl_v2.25.0_linux_amd64.tar.gz"
        sha256 "0ef80a285c73310614e3d952d79c4c643abf5425499956998a39e03d5f2bcaec"

        def install
          bin.install "kluctl"

          bash_output = Utils.safe_popen_read(bin/"kluctl", "completion", "bash")
          (bash_completion/"kluctl").write bash_output

          zsh_output = Utils.safe_popen_read(bin/"kluctl", "completion", "zsh")
          (zsh_completion/"_kluctl").write zsh_output

          fish_output = Utils.safe_popen_read(bin/"kluctl", "completion", "fish")
          (fish_completion/"kluctl.fish").write fish_output
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/kluctl/kluctl/releases/download/v2.25.0/kluctl_v2.25.0_linux_arm64.tar.gz"
        sha256 "c819152baf8ccaaf602cb04d3e805f5ed5dc23911fb16b9b821654c44b733e49"

        def install
          bin.install "kluctl"

          bash_output = Utils.safe_popen_read(bin/"kluctl", "completion", "bash")
          (bash_completion/"kluctl").write bash_output

          zsh_output = Utils.safe_popen_read(bin/"kluctl", "completion", "zsh")
          (zsh_completion/"_kluctl").write zsh_output

          fish_output = Utils.safe_popen_read(bin/"kluctl", "completion", "fish")
          (fish_completion/"kluctl.fish").write fish_output
        end
      end
    end
  end

  test do
    system "#{bin}/kluctl version"
  end
end
